{% extends "base.jinja" %}
{% from "common.jinja" import breadcrumb %}

{% set github_config=settings("library.GitHubSyncConfiguration", use_default_site=True) %}

{% block title %}GitHub Sync{% endblock %}

{% block introduction %}
<h1>GitHub Sync{% if github_config.is_beta %} <span class="beta-badge border-white text-white ms-1">Beta</span>{% endif
    %}</h1>
{% endblock %}

{% block content %}
{{ breadcrumb([
{'url': url('library:codebase-list'), 'text': 'Computational Model Library' },
{'url': url('library:codebase-detail', codebase.identifier), 'text': codebase.title|truncate(68) },
{'text': 'GitHub Sync' },
]) }}
<h1 class="codebase-title mb-3">
    Configure GitHub Sync for <i>{{ codebase.title }}</i>
</h1>
<p class="text-muted">
    GitHub Sync allows you to connect your model in the CoMSES Model Library to a GitHub
    repository.
</p>
<p>
    <a href="{{ url('library:github-sync-overview') }}">Learn more about how it works <i
            class="fas fa-chevron-right"></i></a>
</p>
<div class='my-3' id="github-sync" data-codebase-identifier="{{ codebase.identifier }}"
    data-is-codebase-live="{{ codebase.live }}" data-github-org-name="{{ github_org_name }}"
    data-default-repo-name="{{ slugify(codebase.title) }}" data-enable-new-syncs="{{ github_config.enable_new_syncs }}">
</div>
{% endblock %}

{% block js %}
{{ vite_asset("apps/github_sync_config.ts") }}
{% endblock %}